#------------------------------------#
#- Projekt: IJC2					-#
#- Soubor: Makefile					-#
#- Autor:   Tomáš Juřica			-#
#- Překladač: GCC 4.8.2-7			-#
#- Datum:   24.4.2014				-#
#------------------------------------#
 
MOD= htab_init.o hash_function.o htab_foreach.o htab_statistics.o htab_clear.o htab_free.o htab_lookup.o htab_remove.o 
CC=gcc
CFLAGS= -pedantic -Wall -O2
all: fold fold2 wordcount wordcount-dynamic libhtable.a libhtable.so $(MOD) wordcount.o 

#-----------jednotlive moduly--------------------------------------------
wordcount.o: wordcount.c htable.h
	cc $(CFLAGS) -std=c99 -fPIC -c wordcount.c -o wordcount.o
	
io.o: io.c
	cc $(CFLAGS) -std=c99 -fPIC -c io.c -o i.o	
	
htab_init.o: htab_init.c htable.h
	cc $(CFLAGS) -std=c99 -fPIC -c htab_init.c -o htab_init.o
	
hash_function.o: hash_function.c htable.h
	cc $(CFLAGS)  -std=c99  -fPIC -c hash_function.c -o hash_function.o
	
htab_foreach.o: htab_foreach.c htable.h
	cc $(CFLAGS) -std=c99 -fPIC -c htab_foreach.c -o htab_foreach.o
	
htab_statistics.o: htab_statistics.c htable.h 
	cc $(CFLAGS) -std=c99 -fPIC -c htab_statistics.c -o htab_statistics.o
	
htab_clear.o: htab_clear.c htable.h
	cc $(CFLAGS) -std=c99 -fPIC -c htab_clear.c -o htab_clear.o
	
htab_free.o: htab_free.c htable.h
	cc $(CFLAGS) -std=c99 -fPIC -c htab_free.c -o htab_free.o
	
htab_lookup.o: htab_lookup.c htable.h
	cc $(CFLAGS)  -std=c99 -fPIC -c htab_lookup.c -o htab_lookup.o
	
htab_remove.o: htab_remove.c htable.h
	gcc $(CFLAGS)  -std=c99 -fPIC -c htab_remove.c -o htab_remove.o		
	
						

####------sestaveni staticke a dynamicke knihovny------------------------
libhtable.a: $(MOD) 
	ar crs libhtable.a $(MOD)

libhtable.so: $(MOD)
	$(CC) -fPIC -shared -o libhtable.so  $(MOD)

####------sestaveni spustitelnych souboru------------------------
	
wordcount: libhtable.a wordcount.o io.c
	$(CC) $(CFLAGS) wordcount.o $(MOD) -o wordcount
#$(CC) $(CFLAGS) -static wordcount.o -L. -lhtable -o wordcount		
wordcount-dynamic: wordcount.o libhtable.so
	$(CC) -pedantic -Wall  -O2 -o wordcount-dynamic  wordcount.o -L. -lhtable	
		
fold: fold.c
	$(CC) $(CFLAGS) -std=c99 fold.c -o fold
	
fold2: fold2.cc
	g++ $(CFLAGS) -std=c++11 fold2.cc -o fold2
	
	
	


clean:
	rm -f *.o fold2 fold wordcount wordcount-dynamic libhtable.a libhtable.so *.h~ *.c~	 *.a~



